import{q as I,r,j as e,d as _,a as b}from"./app-da728457.js";import k from"./Mainlayout-7fcc381d.js";import C from"./FlashMessage-a30069c7.js";import"./ThemeConfig-942266fd.js";import"./Footer-93a16f13.js";import"./HeaderV3-f5723e8c.js";import"./Dropdown-2aa762ac.js";import"./i18next-b264b5f3.js";import"./nonIterableRest-5e64c36b.js";import"./iconBase-530cc4cf.js";import"./SidebarV3-3a51bfdb.js";import"./index-e2ecdd97.js";function E(){const{base_url:i,flash:g,break_times:v,button:d}=I().props,[l,x]=r.useState(v),[h,p]=r.useState(null),[D,w]=r.useState(null),[n,c]=r.useState(!1),[S,T]=r.useState(0),[a,o]=r.useState(""),[R,u]=r.useState("");r.useEffect(()=>{const t=localStorage.getItem("startTime"),s=localStorage.getItem("comment");t&&(p(new Date(t)),o(s),c(!0))},[]),r.useEffect(()=>{let t;return n?t=setInterval(()=>{T(Date.now()-h)},1e3):clearInterval(t),()=>{clearInterval(t)}},[n,h]);const N=()=>{if(n){const t=new Date;w(t),c(!1),localStorage.setItem("endTime",t),f(a)}else{const t=new Date;p(t),c(!0),localStorage.setItem("startTime",t),localStorage.setItem("comment",a),f()}},f=async(t="")=>{if(t!=="")try{const s={comment:t},m=await b.post("/admin/home-office-attendance/save",s);x(m.data),localStorage.removeItem("startTime"),localStorage.removeItem("endTime"),localStorage.removeItem("comment"),o("")}catch(s){u(s.response.data.message)}else try{const s=await b.post("/admin/home-office-attendance/save");x(s.data)}catch(s){u(s.response.data.message)}},y=t=>{const s=Math.floor(t/1e3),m=Math.floor(s/60),j=s%60;return`${m}:${j<10?"0":""}${j}`};return e.jsxs(e.Fragment,{children:[e.jsx(C,{flash:g}),e.jsxs("div",{className:"mb-5 panel mt-6 flex flex-wrap items-center justify-between overflow-x-auto whitespace-nowrap p-3 ",children:[e.jsx("ul",{className:"flex w-full space-x-2 rtl:space-x-reverse md:w-2/3",children:e.jsx("li",{className:"text-red-600 hover:underline",children:e.jsx("b",{children:e.jsx("span",{className:"text-[18px]",children:"Check any previous days attendance"})})})}),e.jsx("div",{className:"md:w-1/3 ",children:e.jsx(_,{href:`${i}/admin/home-office-attendance`,className:"px-7 py-2 rounded-md btn-gradient  w-full border-0 uppercase shadow-[0_10px_20px_-10px_rgba(67,97,238,0.44)] bg-indigo-500 text-white font-bold",children:d&&d.attend_date!==null?"Check Out":"Check In"})})]}),e.jsx("div",{className:"pt-5",children:e.jsxs("div",{className:"flex flex-wrap justify-between items-start mb-5",children:[e.jsx("div",{className:"panel basis-[40%]",children:e.jsx("div",{className:"mb-5",children:e.jsx("ul",{className:" flex flex-col max-w-[160px] m-auto space-y-4 font-semibold text-white-dark",children:e.jsxs("li",{className:"items-center gap-2",children:[e.jsx("div",{className:"rounded-full flex items-center justify-center",children:n&&e.jsx("p",{className:"py-1 px-2 bg-danger h-[120px] w-[120px] rounded-full flex items-center justify-center text-white font-bold",children:y(S)})}),e.jsxs("div",{children:[n&&e.jsx("textarea",{className:"form-input mt-5 mr-auto",placeholder:"Add a comment",value:a,onChange:t=>o(t.target.value)}),n&&a.trim()===""&&e.jsx("span",{className:"text-red-600 text-[14px]",children:"Please comment then click the stop break"})]}),e.jsx("div",{className:"btn btn-gradient !mt-6 w-full border-0 uppercase shadow-[0_10px_20px_-10px_rgba(67,97,238,0.44)] bg-indigo-500 text-white",children:e.jsx("button",{onClick:N,disabled:n&&a.trim()==="",children:n?"Stop Break":"Start Break"})})]})})})}),e.jsx("div",{className:"basis-[59%]",children:e.jsx("div",{className:"panel",children:e.jsx("div",{className:"table-responsive mb-5",children:e.jsxs("table",{children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Date"}),e.jsx("th",{children:"Reason"}),e.jsx("th",{children:"Start Time"}),e.jsx("th",{children:"End Time"}),e.jsx("th",{children:"Duration"})]})}),e.jsx("tbody",{children:l==null?void 0:l.map((t,s)=>e.jsxs("tr",{children:[e.jsx("td",{children:t==null?void 0:t.start_date}),e.jsx("td",{children:t==null?void 0:t.comment}),e.jsx("td",{children:t==null?void 0:t.start_time}),e.jsx("td",{children:t==null?void 0:t.end_time}),e.jsx("td",{children:t==null?void 0:t.duration})]},s))})]})})})})]})})]})}E.layout=i=>e.jsx(k,{children:i,title:"HR || Leave Application"});export{E as default};
